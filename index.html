<!DOCTYPE html>
<html class="light-theme" spellcheck="false">
  <head>
    <title>Hello World!</title>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css"></link>
    <link rel="stylesheet" href="css/main.css"></link>
    <script src="https://kit.fontawesome.com/16fed93f1f.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="homepage">
      <div class="flex-div">
        <button class="h-button" id="h-notepad-btn">
          <i class="fas fa-marker"></i>
        </button>
        <button class="h-button" id="h-calendar-btn">
          <i class="fas fa-calendar"></i>
        </button>
        <button class="h-button" id="h-settings-btn">
          <i class="fas fa-cog"></i>
        </button>
      </div>
    </div>
    
    <div id="calendarpage">
      <div id="calendar-month-title-area">
        <div id='calendar-month-title'>title</div>
        <div class="calendar-button-area">
          <div class="h-button" id="calendar-home-button">
            <i class="fas fa-marker"></i>
          </div>
        </div>
      </div>
      <div class="calendar-arrow-button" id="calendar-left-button">
        <i class="fas fa-chevron-left"></i>
      </div>
      <div class="calendar-arrow-button" id="calendar-right-button">
        <i class="fas fa-chevron-right"></i>
      </div>
      <div id="calendar-day-overview">
        <div class="container">
          <div class="day-title"></div>
          <div class="day-overview-timeline"></div> 
        </div>
      </div>
      <div id="calendar-month-div">
        <div id="calendar"></div>
      </div>
    </div>

    <div id="settingspage">
      <div class="topbar">
        <div class="h-button" id="settings-home-button">
          <i class="fas fa-marker"></i>
        </div>
        <div id="settings-title">Settings</div>
      </div>
      <div class="body">
        <div class="settings-theme-body">
          <div>Theme:</div>
          <div class="settings-option" id="settings-light-theme-button">light</div>
          <div class="settings-option" id="settings-dark-theme-button">dark</div>
        </div>
      </div>
    </div>

    <section id="topbar">topbar</section>
    
    <section id="filebrowser">
      <div class="fb-title">NOTES</div>
      <div id="fb-body"></div>
    </section>

    <section id="notepad">
      <div id="notepad-top"></div>
      <!-- <div class="notepad-body"> -->
    </section>

    <section id="timeline">
      <div id="timeline-top-buttons">
        <div id="timeline-new-event-btn">New Event</div>
        <div class="flex">
          <div class="timeline-hour-input" contenteditable="true" id="timeline-starthour-input">999</div>
          <div class="timeline-hour-input" contenteditable="true" id="timeline-endhour-input">999</div>
        </div>
        <div class="flex-filler"></div>
        <div >
          <div id="to-homepage" class="timeline-top-btn">
            <i class="fas fa-home"></i>
          </div>
          <div id="to-calendarpage" class="timeline-top-btn">
            <i class="fas fa-calendar"></i>
          </div>
          <div id="to-settingspage" class="timeline-top-btn">
            <i class="fas fa-cog"></i>
          </div>
        </div>
      </div>
      <div id="timeline-body"></div>
      <div id="timeline-c-div">
        <form>
          <div id='timeline-c-container'> 
            <div class='tc-title-input tc-input-container'>
              <label>Title</label>
              <div id="tc-title" contenteditable="true" class="tc-input-title tc-input"></div>
            </div>
            <div class='tc-input-container'>
              <label>Start</label>
              <div id="tc-starthour" contenteditable="true" class="tc-input"></div>
              <div id="tc-startmin" contenteditable="true" class="tc-input"></div>
            </div>
            <div class='tc-input-container'>
              <label>End</label>
              <div id="tc-endhour" contenteditable="true" class="tc-input"></div>
              <div id="tc-endmin" contenteditable="true" class="tc-input"></div>
            </div>
            <div class="tc-date-input tc-input-container">
              <label>Date</label>
              <div id="tc-month" contenteditable="false" class="tc-input"></div>
              <div id="tc-day" contenteditable="false" class="tc-input"></div>
              <div id="tc-year" contenteditable="false" class="tc-input"></div>
            </div>
            <div class="fill-div">
              <div id='tc-remove' class="tc-button cursornone">
                <i class="fas fa-trash"></i>
              </div>
              <div id='tc-submit' class="tc-button cursornone">
                <i class="fas fa-check"></i>
              </div>
              <div id='tc-cancel' class="tc-button cursornone">
                <i class="fas fa-times"></i>
              </div>
            </div>
          </div>
        </form>
      </div>
    </section>

    <div id="timeline-new-event-modal" class="tn-modal">
      <div class="tn-modal-content">
        <span class="close">&times;</span>
        <form>
          <div id='timeline-n-div'> 
            <div class='tn-input-div title'>
              <label>Title</label>
              <input type='text' id="tn-title" class='span2'>
            </div>
            <div class="tn-input-div">
              <label>Start</label>
              <input type='text' id="tn-starthour">
              <input type='text' id="tn-startmin">
            </div>
            <div class="tn-input-div">
              <label>End</label>
              <input type='text' id="tn-endhour">
              <input type='text' id="tn-endmin">
            </div>
            <!-- <div class="tn-input-div date">
              <label>Date</label>
              <input type='text' id="tn-month">
              <input type='text' id="tn-day">
              <input type='text' id="tn-year">        
            </div> -->
          </div>
          <button type="submit" id='tme-submit-btn'>Create</button>
        </form>
      </div>
    </div>
  </body>

  <!-- TEMPLATES -->

  <template id="template-fb-item">
    <div class="fb-item">
        <button class="fb-item-btn">
          <i class=""></i>
          <div class="fb-item-title">
            TITLE
          </div>
        </button>
        <section class="fb-item-children"></section>
    </div>
  </template>

  <template id="template-fb-item-dragging">
    <div class="fb-item-dragging fb-item-btn"></div>
  </template>

  <template id="template-context-menu">
    <div class="custom-context-menu"></div>
  </template>

  <template id="template-tab-div">
    <div class="tab-div">
      <i class="far fa-file-alt"></i>
      <span>titletitletitle</span>
      <i class="fas fa-times close-tab"></i>
    </div>
  </template>

  <template id="template-notepad-body">
    <div class="notepad-body">
      <div class="quill-editor-container">
        <div class="quill-editor"></div>
      </div>
    </div>
  </template>

  <template id="template-calendar-day">
    <div class="calendar-day">
      <div class="c-num"></div>
      <div class="c-timeline"></div>
    </div>
  </template>

  <!-- SCRIPTS -->

  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script type='module' src="./renderer-process/quill-adds/page-breaker.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script type="module">
    import {FileBrowser} from "./renderer-process/FileBrowser.js"
    import {Notepad} from "./renderer-process/Notepad.js"
    import {Timeline} from "./renderer-process/Timeline.js"
    import {HomePage} from "./renderer-process/HomePage.js"
    import {CalendarPage} from "./renderer-process/CalendarPage.js"
    import {SettingsPage} from "./renderer-process/SettingsPage.js"

    // window.addEventListener("beforeunload", function(ev) {
    //   console.log('TODO: before window close')
    // })

    // Hotkey
    let keydowns = new Object();
    $(document).keydown(function(event) {
      keydowns[event.which] = true
      if (keydowns[17] && keydowns[83]) {
        Notepad.Save()
      }
    })
    $(document).keyup(function(event) {
      keydowns[event.which] = false
    })
    //

    $(function() {
      FileBrowser.Refresh()
      Notepad.Refresh()
      Timeline.Refresh()
    })
    
  </script>

</html>